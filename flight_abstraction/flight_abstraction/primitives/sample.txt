def update_callback(self):
    """Called at 20 Hz to update all executing primitives"""
    
    if self.arm_primitive.get_state() == PrimitiveState.EXECUTING:
        self.arm_primitive.update()
    
    if self.takeoff_primitive.get_state() == PrimitiveState.EXECUTING:
        self.takeoff_primitive.update()
    
    if self.goto_primitive.get_state() == PrimitiveState.EXECUTING:
        self.goto_primitive.update()
    
    if self.land_primitive.get_state() == PrimitiveState.EXECUTING:
        self.land_primitive.update()
```

**Why separate update timer?**
- **Decouples** primitive state updates from action feedback
- **Consistent** update rate regardless of action client behavior
- **Shared** timer reduces overhead
- **Thread-safe** with ReentrantCallbackGroup

---

## ðŸ”„ **Execution Flow Example: Takeoff**

Let's trace a complete takeoff operation:
```
1. User/Client sends goal:
   ros2 action send_goal /drone_0/takeoff multi_drone_msgs/action/Takeoff \
     "{target_altitude: 10.0, climb_rate: 1.0}"

2. FAL Node receives goal:
   â†’ takeoff_execute_callback() invoked
   
3. Execute primitive:
   â†’ takeoff_primitive.execute(target_altitude=10.0)
   â†’ Validates parameters
   â†’ Checks armed state (MUST be armed)
   â†’ Calls /drone_0/mavros/set_mode (GUIDED)
   â†’ Calls /drone_0/mavros/cmd/takeoff (altitude=10.0)
   â†’ Sets state to EXECUTING
   â†’ Returns True

4. Monitor loop starts (10 Hz):
   Iteration 1 (t=0.1s):
   â†’ takeoff_primitive.update() called
     â†’ Reads altitude from local_pos_sub
     â†’ current_altitude = 0.2m
     â†’ progress = (0.2 - 0.0) / 10.0 * 100 = 2%
   â†’ Publishes feedback: altitude=0.2m, progress=2%
   
   Iteration 5 (t=0.5s):
   â†’ update() called
     â†’ current_altitude = 1.5m
     â†’ progress = 15%
   â†’ Publishes feedback: altitude=1.5m, progress=15%
   
   ... (continues) ...
   
   Iteration 100 (t=10.0s):
   â†’ update() called
     â†’ current_altitude = 9.8m
     â†’ |9.8 - 10.0| = 0.2m < 0.5m (acceptance radius)
     â†’ Sets state to SUCCESS
   â†’ goal_handle.succeed()
   â†’ Returns result: success=True, final_altitude=9.8m

5. Action completes, client receives result